.\" Man page generated from reStructuredText.
.
.TH "PCOCC-IMAGE" "1" "Sep 19, 2018" "0.5.0" "pcocc"
.SH NAME
pcocc-image \- List and manage VM images
.
.nr rst2man-indent-level 0
.
.de1 rstReportMargin
\\$1 \\n[an-margin]
level \\n[rst2man-indent-level]
level margin: \\n[rst2man-indent\\n[rst2man-indent-level]]
-
\\n[rst2man-indent0]
\\n[rst2man-indent1]
\\n[rst2man-indent2]
..
.de1 INDENT
.\" .rstReportMargin pre:
. RS \\$1
. nr rst2man-indent\\n[rst2man-indent-level] \\n[an-margin]
. nr rst2man-indent-level +1
.\" .rstReportMargin post:
..
.de UNINDENT
. RE
.\" indent \\n[an-margin]
.\" old: \\n[rst2man-indent\\n[rst2man-indent-level]]
.nr rst2man-indent-level -1
.\" new: \\n[rst2man-indent\\n[rst2man-indent-level]]
.in \\n[rst2man-indent\\n[rst2man-indent-level]]u
..
.SH SYNOPSIS
.sp
pcocc image [COMMAND] [ARG]
.SH DESCRIPTION
.sp
List and manage virtual machine images.
.sp
All the subcommands of \fIpcocc image\fP operate on images stored in pcocc repositories. The list of pcocc repositories is defined in \fIrepos.yaml\fP (see pcocc\-repos.yaml(5)).
.sp
Images in repositories are uniquely identified by a name and revision number. In all pcocc commands and configuration files, images in repositories are specified with the following URI syntax: [REPO:]IMAGE[@REVISION]. If REPO is omitted the command will look in all defined repositories by order of priority until it finds a matching image. If REVISION is omitted, the highest revision of the image is selected.
.sp
Images are made of a stack of layers with each layer containing the differences from the previous layers. Layers can be shared between images in a repository which allows to reduce the storage footprint and speeds up operations by avoiding unnecessary data movement.
.SH SUB-COMMANDS
.INDENT 0.0
.INDENT 3.5
.INDENT 0.0
.TP
.B list [\-R repo] [REGEX]
List image in repositories. The result can be filtered by repository and/or by image name with a regular expression.
.TP
.B show [IMAGE]
Show a detailed description of the specified imagge
.TP
.B import [\-t fmt] [KIND] [SOURCE] [DEST]
Import the source image file to an image in the destination repository. The destination image name must not already be used in the destination repository and the revision is ignored since the import operation creates the first revision of a new image. See below for supported image kinds and file formats.
.TP
.B export [\-t fmt] [KIND] [SOURCE] [DEST]
Export the source image file from a repository to the destination file. See below for supported image kinds and file formats.
.TP
.B copy [SOURCE] [DEST]
Copy an image from a repository to another image in a repository. The destination image name must not already be used in the destination repository and the destination revision is ignored since a copy operation creates the first revision of a new image.
.TP
.B delete [IMAGE]
Delete an image from a repository. If a revision is specified, only the specified revision is deleted, otherwise all revisions of the image are deleted.
.TP
.B repo list
List configured repositories
.TP
.B repo gc [REPO]
Cleanup unnecessary data from a repository. This command should be run to free space used by data no longer used by any image.
.UNINDENT
.UNINDENT
.UNINDENT
.SH IMPORT AND EXPORT FILE FORMATS
.sp
pcocc repositories currently only manage VM images so the only valid value for KIND is \fIvm\fP\&. The following VM image file formats are supported: \fIraw\fP, \fIqcow2\fP, \fIqed\fP, \fIvdi\fP, \fIvpc\fP, \fIvmdk\fP\&. By default, pcocc will try to guess the file format from the image file itself or from its extension. The file format of the imported / exported file can be forced with the \-t option.
.SH EXAMPLES
.sp
To list available images:
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
pcocc image list
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
To import an image into a repository named \fIglobal\fP:
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
pcocc image import vm $HOME/CentOS\-7\-x86_64\-GenericCloud.qcow2 global:centos7\-cloud
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
To copy an image between repositories:
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
pcocc image copy global:centos7\-cloud user:mycentos7
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
To get detailed information relative to an image:
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
pcocc image show user:mycentos7
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
To delete a specific revision of an image:
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
pcocc image delete user:mycentos7@5
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
To completely delete all revisions of an image:
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
pcocc image delete myrepo:centos7\-cloud
.ft P
.fi
.UNINDENT
.UNINDENT
.SH SEE ALSO
.sp
pcocc\-save(1), pcocc\-repos.yaml(5), pcocc\-templates.yaml(5)
.SH AUTHOR
François Diakhaté
.SH COPYRIGHT
2017
.\" Generated by docutils manpage writer.
.
